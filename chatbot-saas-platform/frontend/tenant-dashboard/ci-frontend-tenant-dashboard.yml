trigger:
  branches:
    include:
      - dev  

  paths:
    include:
      - chatbot-saas-platform/frontend/tenant-dashboard/**

pool:
  name: ubuntu-22.04

variables:
  workingDirectory: 'chatbot-saas-platform/frontend/tenant-dashboard'
  artifactName: 'tenant-dashboard'

steps:
#  Use Node 22
- task: NodeTool@0
  inputs:
    versionSpec: '22.x'
  displayName: 'Use Node.js 22'

# Install dependencies
- script: npm ci
  workingDirectory: $(workingDirectory)
  displayName: 'Install NPM dependencies'

# Build React app
- script: npm run build
  workingDirectory: $(workingDirectory)
  displayName: 'Build React app'

# Publish build artifacts
- task: PublishBuildArtifacts@1
  inputs:
    PathtoPublish: '$(workingDirectory)/dist'
    ArtifactName: $(artifactName)
    publishLocation: 'Container'
  displayName: 'Publish Build Artifacts'
