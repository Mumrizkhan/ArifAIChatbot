trigger:
  branches:
    include:
      - dev  

pool:
  name: ubuntu-22.04

variables:
  workingDirectory: 'chatbot-saas-platform/frontend/admin-dashboard'
  artifactName: 'admin-dashboard'

steps:
#  Use Node 22
- task: NodeTool@0
  inputs:
    versionSpec: '22.x'
  displayName: 'Use Node.js 22'

# Install dependencies
- script: npm ci
  workingDirectory: $(workingDirectory)
  displayName: 'Install NPM dependencies'

# Build React app
- script: npm run build
  workingDirectory: $(workingDirectory)
  displayName: 'Build React app'

# Publish build artifacts
- task: PublishBuildArtifacts@1
  inputs:
    PathtoPublish: '$(workingDirectory)/build'
    ArtifactName: $(artifactName)
    publishLocation: 'Container'
  displayName: 'Publish Build Artifacts'
